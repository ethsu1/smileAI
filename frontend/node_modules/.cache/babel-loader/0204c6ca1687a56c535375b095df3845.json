{"ast":null,"code":"import _regeneratorRuntime from\"/Users/ethan/Desktop/smileai/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/ethan/Desktop/smileai/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/ethan/Desktop/smileai/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/ethan/Desktop/smileai/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/ethan/Desktop/smileai/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/ethan/Desktop/smileai/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/ethan/Desktop/smileai/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import'bootstrap/dist/css/bootstrap.min.css';import LoadingOverlay from'react-loading-overlay';import PacmanLoader from\"react-spinners/PacmanLoader\";import{Jumbotron,Row,Button}from'react-bootstrap';import{Grid,CardActionArea,Card,CardActions,Container,Typography}from'@material-ui/core';import'./styles.css';import axios from'axios';var canvas,canvasCtx,video,newImage;var Camera=/*#__PURE__*/function(_React$Component){_inherits(Camera,_React$Component);var _super=_createSuper(Camera);function Camera(props){var _this;_classCallCheck(this,Camera);_this=_super.call(this,props);_this.state={video:null,wait:false,confidence:\"Need a picture\"};_this.sendPhoto=_this.sendPhoto.bind(_assertThisInitialized(_this));_this.disableButton=_this.disableButton.bind(_assertThisInitialized(_this));return _this;}_createClass(Camera,[{key:\"componentDidMount\",value:function componentDidMount(){var constraints={audio:true,video:{width:500,height:500},facingMode:{exact:\"user\"}};video=document.querySelector(\"#video\");canvas=document.querySelector(\"#canvas\");video.width=constraints[\"video\"][\"width\"];video.height=constraints[\"video\"][\"height\"];canvas.width=constraints[\"video\"][\"width\"];canvas.height=constraints[\"video\"][\"height\"];canvasCtx=canvas.getContext('2d');canvasCtx.translate(canvas.width,0);canvasCtx.scale(-1,1);navigator.mediaDevices.getUserMedia(constraints).then(function(stream){video.srcObject=stream;video.muted=true;video.onloadedmetadata=function(){video.play();};}).catch(function(err){console.log(err);});}},{key:\"disableButton\",value:function(){var _disableButton=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this2=this;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(this.state.wait===false)){_context.next=5;break;}canvasCtx.clearRect(0,0,500,500);this.setState({confidence:\"Activating smile detection...\"});_context.next=5;return this.setState({wait:true},function(){return _this2.sendPhoto();});case 5:case\"end\":return _context.stop();}}},_callee,this);}));function disableButton(){return _disableButton.apply(this,arguments);}return disableButton;}()},{key:\"sendPhoto\",value:function(){var _sendPhoto=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _this3=this;var hidden_canvas,newCtx,newImage;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:hidden_canvas=document.createElement('canvas');hidden_canvas.width=canvas.width;hidden_canvas.height=canvas.height;newCtx=hidden_canvas.getContext('2d');newCtx.translate(hidden_canvas.width,0);newCtx.scale(-1,1);newImage=document.createElement('img');newCtx.drawImage(video,0,0,500,500);newImage.src=hidden_canvas.toDataURL();hidden_canvas.toBlob(function(blob){var formData=new FormData();formData.append(\"image\",blob);axios({method:'post',url:'http://127.0.0.1:8000/predict',data:formData,headers:{'Content-Type':'multipart/form-data'}}).then(function(res){var top,left,size,color;if(res.data.label===\"no face\"){top=100;left=100;size=200;color='red';}else{top=res.data.top;left=res.data.left;size=res.data.bottom-top;if(res.data.probability<0.65){color='red';}else{color='green';}}canvasCtx.drawImage(newImage,0,0,500,500);canvasCtx.save();canvasCtx.beginPath();canvasCtx.rect(left,top,size,size);canvasCtx.strokeStyle=color;canvasCtx.stroke();canvasCtx.translate(canvas.width,0);canvasCtx.scale(-1,1);canvasCtx.fillStyle=\"white\";canvasCtx.font=\"20pt Arial\";var prob=res.data.probability*100;prob=prob.toFixed(2)+\"%\";var text=res.data.label;canvasCtx.fillText(text,500-size-left,top);canvasCtx.restore();_this3.setState({wait:false});_this3.setState({confidence:\"Probability of \"+text+\": \"+prob});}).catch(function(err){//console.log(err)\n});});case 10:case\"end\":return _context2.stop();}}},_callee2);}));function sendPhoto(){return _sendPhoto.apply(this,arguments);}return sendPhoto;}()},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(Jumbotron,null,/*#__PURE__*/React.createElement(Row,{className:\"justify-content-md-center\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"title\"},\"smileAI\")),/*#__PURE__*/React.createElement(Row,{className:\"justify-content-md-center\"},/*#__PURE__*/React.createElement(\"p\",null,\"Simple AI that detects smiles.\")),/*#__PURE__*/React.createElement(Row,{className:\"justify-content-md-center\"},/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"small\",null,\"Convolutional neural network built using only numpy (no deep learning libaries).\"))),/*#__PURE__*/React.createElement(Row,{className:\"justify-content-md-center\"},/*#__PURE__*/React.createElement(\"p\",null,\"Code for neural network:\\xA0\"),/*#__PURE__*/React.createElement(\"a\",{href:\"https://github.com/ethsu1/convnet_numpy\"},\"github.com/ethsu1/convnet_numpy\")),/*#__PURE__*/React.createElement(Row,{className:\"justify-content-md-center\"},/*#__PURE__*/React.createElement(\"p\",null,\"Code for UI:\\xA0\"),/*#__PURE__*/React.createElement(\"a\",{href:\"https://github.com/ethsu1/smileAI\"},\"github.com/ethsu1/smileAI\"))),/*#__PURE__*/React.createElement(Grid,{container:true,direction:\"row\",justify:\"center\",spacing:5},/*#__PURE__*/React.createElement(Grid,{item:true},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardActionArea,null,/*#__PURE__*/React.createElement(\"video\",{id:\"video\",autoPlay:true,playsInline:true,src:this.state.video,className:\"video\"})),/*#__PURE__*/React.createElement(CardActions,null,/*#__PURE__*/React.createElement(Button,{onClick:this.disableButton,variant:\"primary\",disabled:this.state.wait},\"Take a Picture\")))),/*#__PURE__*/React.createElement(Grid,{item:true},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardActionArea,null,/*#__PURE__*/React.createElement(LoadingOverlay,{active:this.state.wait,spinner:/*#__PURE__*/React.createElement(PacmanLoader,null)},/*#__PURE__*/React.createElement(\"canvas\",{id:\"canvas\"}))),/*#__PURE__*/React.createElement(CardActions,null,/*#__PURE__*/React.createElement(Button,{disabled:true,variant:\"outline-success\"},this.state.confidence))))));}}]);return Camera;}(React.Component);export default Camera;","map":{"version":3,"sources":["/Users/ethan/Desktop/smileai/src/Camera.js"],"names":["React","LoadingOverlay","PacmanLoader","Jumbotron","Row","Button","Grid","CardActionArea","Card","CardActions","Container","Typography","axios","canvas","canvasCtx","video","newImage","Camera","props","state","wait","confidence","sendPhoto","bind","disableButton","constraints","audio","width","height","facingMode","exact","document","querySelector","getContext","translate","scale","navigator","mediaDevices","getUserMedia","then","stream","srcObject","muted","onloadedmetadata","play","catch","err","console","log","clearRect","setState","hidden_canvas","createElement","newCtx","drawImage","src","toDataURL","toBlob","blob","formData","FormData","append","method","url","data","headers","res","top","left","size","color","label","bottom","probability","save","beginPath","rect","strokeStyle","stroke","fillStyle","font","prob","toFixed","text","fillText","restore","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport LoadingOverlay from 'react-loading-overlay';\nimport PacmanLoader from \"react-spinners/PacmanLoader\";\nimport {Jumbotron, Row, Button} from 'react-bootstrap'\nimport { Grid, CardActionArea, Card, CardActions, Container, Typography} from '@material-ui/core';\nimport './styles.css';\nimport axios from 'axios';\nlet canvas,canvasCtx, video, newImage;\nclass Camera extends React.Component{\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.state ={\n\t\t\tvideo: null,\n\t\t\twait: false,\n\t\t\tconfidence: \"Need a picture\",\n\t\t}\n\t\tthis.sendPhoto = this.sendPhoto.bind(this)\n\t\tthis.disableButton = this.disableButton.bind(this)\n\t}\n\tcomponentDidMount(){\n    \tvar constraints = { audio: true, video: { width: 500, height: 500}, facingMode: { exact: \"user\" } };\n    \tvideo = document.querySelector(\"#video\");\n\t    canvas = document.querySelector(\"#canvas\");\n\t\tvideo.width = constraints[\"video\"][\"width\"];\n  \t\tvideo.height = constraints[\"video\"][\"height\"];\n  \t\tcanvas.width = constraints[\"video\"][\"width\"];\n\t    canvas.height = constraints[\"video\"][\"height\"];\n\t    canvasCtx = canvas.getContext('2d');\n\t    canvasCtx.translate(canvas.width, 0);\n\t\tcanvasCtx.scale(-1, 1);\n    \tnavigator.mediaDevices.getUserMedia(constraints)\n    \t.then((stream) => {\n\t        video.srcObject = stream;\n\t        video.muted = true;\n\t        video.onloadedmetadata = () => {\n\t        \tvideo.play();\n\t        };\n     \t})\n     \t.catch(function(err) {\n        \tconsole.log(err)\n        }); \n\t}\n\tasync disableButton() {\n\t\tif(this.state.wait === false){\n\t\t\tcanvasCtx.clearRect(0,0,500,500);\n\t\t\tthis.setState({confidence: \"Activating smile detection...\"});\n\t\t\tawait this.setState({wait: true}, () => this.sendPhoto())\n\t\t}\n\t}\n\tasync sendPhoto(){\n\t\tvar hidden_canvas = document.createElement('canvas');\n\t\thidden_canvas.width = canvas.width;\n\t\thidden_canvas.height = canvas.height;\n\t\tvar newCtx = hidden_canvas.getContext('2d');\n\t\tnewCtx.translate(hidden_canvas.width, 0);\n\t\tnewCtx.scale(-1, 1);\n\t\tvar newImage = document.createElement('img');\n\t\tnewCtx.drawImage(video,0,0,500,500)\n\t\tnewImage.src = hidden_canvas.toDataURL()\n\t\thidden_canvas.toBlob((blob) => {\n\t\tconst formData = new FormData();\n\t\t\tformData.append(\"image\", blob);\n\t\t\taxios({\n\t\t\t\tmethod: 'post',\n    \t\t\turl: 'http://127.0.0.1:8000/predict',\n    \t\t\tdata: formData,\n    \t\t\theaders: {'Content-Type': 'multipart/form-data' }\n\t\t\t})\n\t\t\t.then(res => {\n\t\t\t\tlet top, left, size, color;\n\t\t\t\tif(res.data.label === \"no face\"){\n\t\t\t\t\ttop = 100;\n\t\t\t\t\tleft = 100;\n\t\t\t\t\tsize = 200;\n\t\t\t\t\tcolor = 'red';\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\ttop = res.data.top;\n\t\t\t\t\tleft = res.data.left;\n\t\t\t\t\tsize = res.data.bottom-top;\n\t\t\t\t\tif(res.data.probability < 0.65){\n\t\t\t\t\t\tcolor = 'red';\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tcolor = 'green';\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcanvasCtx.drawImage(newImage,0,0,500,500)\n\t\t\t\tcanvasCtx.save();\n\t\t\t\tcanvasCtx.beginPath();\n\t\t\t\tcanvasCtx.rect(left,top, size, size)\n\t\t\t\tcanvasCtx.strokeStyle = color\n\t\t\t\tcanvasCtx.stroke(); \n\t\t\t\tcanvasCtx.translate(canvas.width, 0);\n\t\t\t\tcanvasCtx.scale(-1, 1);\n\t\t\t\tcanvasCtx.fillStyle = \"white\";\n\t\t\t\tcanvasCtx.font = \"20pt Arial\";\n\t\t\t\tvar prob = res.data.probability*100\n\t\t\t\tprob =  prob.toFixed(2) + \"%\"\n\t\t\t\tvar text = res.data.label;\n\t\t\t\tcanvasCtx.fillText(text, 500-size-left,top)\n\t\t\t\tcanvasCtx.restore();\n\t\t\t\tthis.setState({wait: false})\n\t\t\t\tthis.setState({confidence: \"Probability of \" + text + \": \" + prob})\n\t\t\t})\n\t\t\t.catch(err =>{\n\t\t\t\t//console.log(err)\n\t\t\t\t})\n\t\t\t})\n\t}\n\n\n\n\trender(){\n\t\treturn(\n\t\t\t<Container>\n\t\t\t\t<Jumbotron>\n\t\t\t\t\t\t<Row className=\"justify-content-md-center\">\n\t\t\t\t\t  \t\t<h1 className=\"title\">smileAI</h1>\n\t\t\t\t\t  \t</Row>\n\t\t\t\t\t  \t<Row className=\"justify-content-md-center\">\n\t\t\t\t\t\t  <p>\n\t\t\t\t\t\t    Simple AI that detects smiles.\n\t\t\t\t\t\t  </p>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t<Row className=\"justify-content-md-center\">\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<small>Convolutional neural network built using only numpy (no deep learning libaries).</small>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t<Row className=\"justify-content-md-center\">\n\t\t\t\t\t\t\t<p>Code for neural network:&nbsp;</p>\n\t\t\t\t\t\t\t<a href=\"https://github.com/ethsu1/convnet_numpy\">github.com/ethsu1/convnet_numpy</a>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t<Row className=\"justify-content-md-center\">\n\t\t\t\t\t\t\t<p>Code for UI:&nbsp;</p>\n\t\t\t\t\t\t\t<a href=\"https://github.com/ethsu1/smileAI\">github.com/ethsu1/smileAI</a>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</Jumbotron>\n\t\t\t\t<Grid container direction=\"row\" justify=\"center\" spacing={5}>\n\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t<Card>\n\t\t\t\t\t\t\t<CardActionArea>\n\t\t\t\t\t\t\t\t<video id=\"video\" autoPlay={true} playsInline={true} src={this.state.video} className=\"video\"></video>\n\t\t\t\t\t\t\t</CardActionArea>\n\t\t\t\t\t\t\t<CardActions>\n\t\t\t\t\t\t\t\t<Button onClick={this.disableButton} variant=\"primary\" disabled={this.state.wait}>Take a Picture</Button>\n\t\t\t\t\t\t\t</CardActions>\n\t\t\t\t\t\t</Card>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t<Card>\n\t\t\t\t\t\t\t<CardActionArea>\n\t\t\t\t\t\t\t\t<LoadingOverlay active={this.state.wait} spinner={<PacmanLoader/>}>\n\t\t\t\t\t\t\t\t\t<canvas id=\"canvas\"></canvas>\n\t\t\t\t\t\t\t\t</LoadingOverlay>\n\t\t\t\t\t\t\t</CardActionArea>\n\t\t\t\t\t\t\t<CardActions>\n\t\t\t\t\t\t\t\t<Button  disabled={true} variant=\"outline-success\">{this.state.confidence}</Button>\n\t\t\t\t\t\t\t</CardActions>\n\t\t\t\t\t\t</Card>\n\t\t\t\t\t</Grid>\n\n\t\t\t\t</Grid>\n\t\t\t</Container>\n\n\t\t)\n\t}\n}\n\nexport default Camera;"]},"metadata":{},"sourceType":"module"}
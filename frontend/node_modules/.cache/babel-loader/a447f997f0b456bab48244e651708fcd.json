{"ast":null,"code":"var _jsxFileName = \"/Users/ethan/Desktop/smileai/src/Camera.js\";\nimport React from 'react';\nimport { Container, Row, Col, Jumbotron } from 'react-bootstrap';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport * as blazeface from '@tensorflow-models/blazeface';\nimport '@tensorflow/tfjs-backend-webgl';\nimport './styles.css';\n\nclass Camera extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      video: null\n    };\n    this.loadFaceDetect = this.loadFaceDetect.bind(this);\n  }\n\n  async componentDidMount() {\n    var constraints = {\n      audio: true,\n      video: {\n        width: 720,\n        height: 500\n      }\n    };\n    var loadModel = this.loadFaceDetect;\n    navigator.mediaDevices.getUserMedia(constraints).then(stream => {\n      var video = document.querySelector(\"video\");\n      video.srcObject = stream;\n\n      video.onloadedmetadata = () => {\n        video.play();\n      };\n\n      video.onloadeddata = () => loadModel();\n    }).catch(function (err) {\n      console.log(\"no video\");\n      console.log(err);\n    });\n  }\n\n  async loadFaceDetect() {\n    const returnTensors = false;\n    const model = await blazeface.load();\n    const video = document.querySelector(\"video\");\n    const faces = await model.estimateFaces(video, returnTensors);\n    console.log(faces);\n\n    for (let i = 0; i < predictions.length; i++) {\n      const start = predictions[i].topLeft;\n      const end = predictions[i].bottomRight;\n      const size = [end[0] - start[0], end[1] - start[1]]; // Render a rectangle over each detected face.\n\n      ctx.fillRect(start[0], start[1], size[0], size[1]);\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Container, {\n      fluid: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(Jumbotron, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      className: \"justify-content-md-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 10\n      }\n    }, \"smileAI\")), /*#__PURE__*/React.createElement(Row, {\n      className: \"justify-content-md-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }\n    }, \"Simple AI that detects smiles. Positive vibes only.\")), /*#__PURE__*/React.createElement(Row, {\n      className: \"justify-content-md-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(\"small\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }\n    }, \"Neural network built without any deep learning libraries (only numpy).\")))), /*#__PURE__*/React.createElement(Row, {\n      className: \"justify-content-md-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      xs: 6,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"video\", {\n      id: \"video\",\n      autoPlay: true,\n      src: this.state.video,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 21\n      }\n    }))));\n  }\n\n}\n\nexport default Camera;","map":{"version":3,"sources":["/Users/ethan/Desktop/smileai/src/Camera.js"],"names":["React","Container","Row","Col","Jumbotron","blazeface","Camera","Component","constructor","props","state","video","loadFaceDetect","bind","componentDidMount","constraints","audio","width","height","loadModel","navigator","mediaDevices","getUserMedia","then","stream","document","querySelector","srcObject","onloadedmetadata","play","onloadeddata","catch","err","console","log","returnTensors","model","load","faces","estimateFaces","i","predictions","length","start","topLeft","end","bottomRight","size","ctx","fillRect","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {Container, Row, Col, Jumbotron} from 'react-bootstrap';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport * as blazeface from '@tensorflow-models/blazeface';\nimport '@tensorflow/tfjs-backend-webgl';\nimport './styles.css';\nclass Camera extends React.Component{\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.state ={\n\t\t\tvideo: null,\n\t\t}\n\t\tthis.loadFaceDetect = this.loadFaceDetect.bind(this)\n\t}\n\tasync componentDidMount(){\n\t\t\n    \tvar constraints = { audio: true, video: { width: 720, height: 500 } };\n    \tvar loadModel = this.loadFaceDetect;\n    \tnavigator.mediaDevices.getUserMedia(constraints)\n\n    \t.then((stream) => {\n\t        var video = document.querySelector(\"video\");\n\t        video.srcObject = stream;\n\t        video.onloadedmetadata = () => {\n\t        \tvideo.play();\n\t        };\n\t        video.onloadeddata = () => loadModel()\n     \t})\n     \t.catch(function(err) {\n        \tconsole.log(\"no video\")\n        \tconsole.log(err)\n        }); \n\t}\n\n\tasync loadFaceDetect() {\n\t\tconst returnTensors = false;\n\t\tconst model = await blazeface.load();\n     \tconst video = document.querySelector(\"video\");\n\t\tconst faces = await model.estimateFaces(video, returnTensors);\n\t\tconsole.log(faces);\n\t\tfor (let i = 0; i < predictions.length; i++) {\n\t\t      const start = predictions[i].topLeft;\n\t\t      const end = predictions[i].bottomRight;\n\t\t      const size = [end[0] - start[0], end[1] - start[1]];\n\n\t\t      // Render a rectangle over each detected face.\n\t\t      ctx.fillRect(start[0], start[1], size[0], size[1]);\n\t\t    }\n\t}\n\n\n\trender(){\n\t\treturn(\n\t\t\t<Container fluid>\n\t\t\t\t\t<Jumbotron>\n\t\t\t\t\t\t<Row className=\"justify-content-md-center\">\n\t\t\t\t\t  \t\t<h1 className=\"title\">smileAI</h1>\n\t\t\t\t\t  \t</Row>\n\t\t\t\t\t  \t<Row className=\"justify-content-md-center\">\n\t\t\t\t\t\t  <p>\n\t\t\t\t\t\t    Simple AI that detects smiles. Positive vibes only.\n\t\t\t\t\t\t  </p>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t<Row className=\"justify-content-md-center\">\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<small>Neural network built without any deep learning libraries (only numpy).</small>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</Jumbotron>\n\t\t\t\t<Row className=\"justify-content-md-center\">\n\t\t\t\t    <Col xs={6}><video id=\"video\" autoPlay={true} src={this.state.video}></video></Col>\n\t\t\t\t</Row>\n\t\t\t</Container>\n\n\t\t)\n\t}\n}\n\nexport default Camera;"]},"metadata":{},"sourceType":"module"}
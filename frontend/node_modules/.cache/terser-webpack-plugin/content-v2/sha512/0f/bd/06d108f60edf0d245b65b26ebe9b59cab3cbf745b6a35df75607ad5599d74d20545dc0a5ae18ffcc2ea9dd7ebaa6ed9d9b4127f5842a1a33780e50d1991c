{"map":{"version":3,"sources":["js/main.e355bd25.chunk.js"],"names":["this","push","100","module","__webpack_exports__","__webpack_require__","r","canvas","canvasCtx","video","react","react_default","n","react_dom","react_dom_default","Helmet","regenerator","regenerator_default","asyncToGenerator","classCallCheck","createClass","assertThisInitialized","inherits","createSuper","LoadingOverlay","LoadingOverlay_default","PacmanLoader","PacmanLoader_default","Jumbotron","Row","Button","Container","Grid","Card","CardActionArea","CardActions","axios","axios_default","src_Camera","_React$Component","Object","Camera","_super","props","_this","call","state","wait","confidence","sendPhoto","bind","disableButton","key","value","constraints","audio","width","height","facingMode","exact","document","querySelector","getContext","translate","scale","navigator","mediaDevices","getUserMedia","then","stream","srcObject","muted","onloadedmetadata","play","catch","err","console","log","_disableButton","a","mark","_callee","_this2","wrap","_context","prev","next","clearRect","setState","stop","apply","arguments","_sendPhoto","_callee2","hidden_canvas","newCtx","newImage","_this3","_context2","createElement","drawImage","src","toDataURL","toBlob","blob","formData","FormData","append","method","url","data","headers","Content-Type","res","top","left","size","color","label","bottom","probability","save","beginPath","rect","strokeStyle","stroke","fillStyle","font","prob","toFixed","text","fillText","restore","className","href","container","direction","justify","spacing","item","id","autoPlay","playsInline","onClick","variant","disabled","active","spinner","Component","src_App","Boolean","window","location","hostname","match","render","StrictMode","getElementById","serviceWorker","ready","registration","unregister","error","message","56","exports","80"],"mappings":"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"},"code":"(this.webpackJsonpsmileai=this.webpackJsonpsmileai||[]).push([[0],{100:function(e,t,a){\"use strict\";a.r(t);var n,i,r,c=a(0),l=a.n(c),o=a(12),s=a.n(o),u=a(40),d=a(21),m=a.n(d),h=a(27),f=a(43),v=a(44),p=a(17),b=a(54),E=a(53),w=(a(65),a(45)),g=a.n(w),y=a(46),k=a.n(y),j=a(119),x=a(120),S=a(124),I=a(125),O=a(121),B=a(126),C=a(123),N=a(122),P=(a(80),a(48)),A=a.n(P),D=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={video:null,wait:!1,confidence:\"Need a picture\"},n.sendPhoto=n.sendPhoto.bind(Object(p.a)(n)),n.disableButton=n.disableButton.bind(Object(p.a)(n)),n}return Object(v.a)(a,[{key:\"componentDidMount\",value:function(){var e={audio:!0,video:{width:500,height:500},facingMode:{exact:\"user\"}};r=document.querySelector(\"#video\"),n=document.querySelector(\"#canvas\"),r.width=e.video.width,r.height=e.video.height,n.width=e.video.width,n.height=e.video.height,(i=n.getContext(\"2d\")).translate(n.width,0),i.scale(-1,1),navigator.mediaDevices.getUserMedia(e).then((function(e){r.srcObject=e,r.muted=!0,r.onloadedmetadata=function(){r.play()}})).catch((function(e){console.log(e)}))}},{key:\"disableButton\",value:function(){var e=Object(h.a)(m.a.mark((function e(){var t=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==this.state.wait){e.next=5;break}return i.clearRect(0,0,500,500),this.setState({confidence:\"Activating smile detection...\"}),e.next=5,this.setState({wait:!0},(function(){return t.sendPhoto()}));case 5:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"sendPhoto\",value:function(){var e=Object(h.a)(m.a.mark((function e(){var t,a,c,l=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=document.createElement(\"canvas\")).width=n.width,t.height=n.height,(a=t.getContext(\"2d\")).translate(t.width,0),a.scale(-1,1),c=document.createElement(\"img\"),a.drawImage(r,0,0,500,500),c.src=t.toDataURL(),t.toBlob((function(e){var t=new FormData;t.append(\"image\",e),A()({method:\"post\",url:\"http://127.0.0.1:8000/predict\",data:t,headers:{\"Content-Type\":\"multipart/form-data\"}}).then((function(e){var t,a,r,o;\"no face\"===e.data.label?(t=100,a=100,r=200,o=\"red\"):(t=e.data.top,a=e.data.left,r=e.data.bottom-t,o=e.data.probability<.65?\"red\":\"green\"),i.drawImage(c,0,0,500,500),i.save(),i.beginPath(),i.rect(a,t,r,r),i.strokeStyle=o,i.stroke(),i.translate(n.width,0),i.scale(-1,1),i.fillStyle=\"white\",i.font=\"20pt Arial\";var s=100*e.data.probability;s=s.toFixed(2)+\"%\";var u=e.data.label;i.fillText(u,500-r-a,t),i.restore(),l.setState({wait:!1}),l.setState({confidence:\"Probability of \"+u+\": \"+s})})).catch((function(e){}))}));case 10:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:\"render\",value:function(){return l.a.createElement(I.a,null,l.a.createElement(j.a,null,l.a.createElement(x.a,{className:\"justify-content-md-center\"},l.a.createElement(\"h1\",{className:\"title\"},\"smileAI\")),l.a.createElement(x.a,{className:\"justify-content-md-center\"},l.a.createElement(\"p\",null,\"Simple AI that detects smiles.\")),l.a.createElement(x.a,{className:\"justify-content-md-center\"},l.a.createElement(\"p\",null,l.a.createElement(\"small\",null,\"Convolutional neural network built using only numpy (no deep learning libaries).\"))),l.a.createElement(x.a,{className:\"justify-content-md-center\"},l.a.createElement(\"p\",null,\"Code for neural network:\\xa0\"),l.a.createElement(\"a\",{href:\"https://github.com/ethsu1/convnet_numpy\"},\"github.com/ethsu1/convnet_numpy\")),l.a.createElement(x.a,{className:\"justify-content-md-center\"},l.a.createElement(\"p\",null,\"Code for UI:\\xa0\"),l.a.createElement(\"a\",{href:\"https://github.com/ethsu1/smileAI\"},\"github.com/ethsu1/smileAI\"))),l.a.createElement(O.a,{container:!0,direction:\"row\",justify:\"center\",spacing:5},l.a.createElement(O.a,{item:!0},l.a.createElement(B.a,null,l.a.createElement(C.a,null,l.a.createElement(\"video\",{id:\"video\",autoPlay:!0,playsInline:!0,src:this.state.video,className:\"video\"})),l.a.createElement(N.a,null,l.a.createElement(S.a,{onClick:this.disableButton,variant:\"primary\",disabled:this.state.wait},\"Take a Picture\")))),l.a.createElement(O.a,{item:!0},l.a.createElement(B.a,null,l.a.createElement(C.a,null,l.a.createElement(g.a,{active:this.state.wait,spinner:l.a.createElement(k.a,null)},l.a.createElement(\"canvas\",{id:\"canvas\"}))),l.a.createElement(N.a,null,l.a.createElement(S.a,{disabled:!0,variant:\"outline-success\"},this.state.confidence))))))}}]),a}(l.a.Component);var M=function(){return l.a.createElement(\"div\",null,l.a.createElement(u.a,null,l.a.createElement(\"style\",null,\"body { background-color: #98FB98; }\")),l.a.createElement(D,null))};Boolean(\"localhost\"===window.location.hostname||\"[::1]\"===window.location.hostname||window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(M,null)),document.getElementById(\"root\")),\"serviceWorker\"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},56:function(e,t,a){e.exports=a(100)},80:function(e,t,a){}},[[56,1,2]]]);","extractedComments":[]}